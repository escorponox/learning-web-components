!function(t){function n(t){const n=t.currentTarget.previousElementSibling.value;var o=!1;"MVP"===n&&(e(),o=!0),"A03"===n&&(r(),o=!0),"WOMBOCOMBO"===n&&(i(),o=!0),o?cart.total.virtualPromo>cart.total.promo?c(n):s("Better promo already applied"):a()}function e(){var t=cart.lines.reduce(function(t,n){return t.unitPrice<n.unitPrice?n:t},{unitPrice:0});t.virtualPromo=.15*t.unitPrice,o()}function r(){cart.lines.filter(function(t){return"a03"===t.articleId}).forEach(function(t){t.virtualPromo=t.unitPrice*t.quantity*.2}),o()}function i(){cart.total.virtualPromo=.1*cart.total.amount}function o(){cart.total.virtualPromo=cart.lines.reduce(function(t,n){return t+=n.virtualPromo},0)}function a(){T.value="",s("Not a valid code")}function c(t){cart.total.promo=cart.total.virtualPromo,cart.total.promoCode=t,cart.lines.forEach(function(t){t.promo=t.virtualPromo,t.virtualPromo=0}),L(),q(),g(),I.innerHTML="$"+cart.total.promo.toFixed(2)+" discount",I.classList.add("promo--show")}function s(t){w.innerHTML=t,w.classList.add("promo--show"),setTimeout(function(){w.classList.remove("promo--show")},5e3)}function u(){cart.total.promoCode&&(cart.total.promo=0,cart.total.virtualPromo=0,cart.total.promoCode="",cart.lines.forEach(function(t){t.promo=0,t.virtualPromo=0}),I.classList.remove("promo--show"),T.value="",I.innerHTML="",s("ALL PROMOS CLEARED"))}function l(t){var n=t.target.classList.contains("button-plus"),e=t.target.classList.contains("fa-plus");if(n||e){const r=n?t.target.parentNode.parentNode:t.target.parentNode.parentNode.parentNode,i=r.id.slice(5);cart.lines.filter(function(t){return t.articleId===i}).forEach(function(t){t.quantity++}),y()}}function d(t){const n=t.target.classList.contains("button-minus"),e=t.target.classList.contains("fa-minus");if(n||e){const r=n?t.target.parentNode.parentNode:t.target.parentNode.parentNode.parentNode,i=r.id.slice(5);cart.lines.filter(function(t){return t.articleId===i}).forEach(function(t){t.quantity--}),cart.lines=cart.lines.filter(function(t){return t.quantity>0}),v(),y(),h.style.marginBottom=P.offsetHeight-5+"px"}}function m(t){const n=t.target.classList.contains("button-remove"),e=t.target.classList.contains("fa-times");if(n||e){const r=n?t.target.parentNode.parentNode:t.target.parentNode.parentNode.parentNode,i=r.id.slice(5);cart.lines=cart.lines.filter(function(t){return t.articleId!==i}),r.remove(),y(),h.style.marginBottom=P.offsetHeight-5+"px"}}function f(t){if(t.target.classList.contains("add-button")){const n=listing.articles.filter(function(n){return n.id===t.target.id})[0];cart.lines.filter(function(t){return t.articleId===n.id}).map(function(t){return t.quantity++,t.amount+=n.price,t}).length?L():p(n),y(),P.classList.add("cart--show"),h.classList.add("listing-container--cart-show")}}function p(n){cart.lines.push({articleId:n.id,quantity:1,unitPrice:n.price,amount:n.price,promo:0,virtualPromo:0});const e=t.createElement("div");e.classList.add("cart-list__item"),e.id="line-"+n.id,e.innerHTML='<div class="cart-list__item__info"><div class="button button--sm button-quantity button-remove"><span class="fa fa-times" aria-hidden="true"></span></div><div class="cart-list__item__name">'+n.name+'</div><span class="line-price">$'+n.price+'</span></div><div class="cart-list__item__quantity"><div class="button button--sm button-quantity button-minus"><span class="fa fa-minus" aria-hidden="true"></span></div><input class="coves-form__input input-quantity" value="1"><div class="button button--sm button-quantity button-plus"><span class="fa fa-plus" aria-hidden="true"></span></div></div>',E.appendChild(e)}function v(){const n=t.querySelectorAll(".cart-list__item");[].forEach.call(n,function(t){cart.lines.some(function(n){return n.articleId===t.id.slice(5)})||t.remove()})}function y(){u(),L(),q(),g()}function L(){const n=t.querySelectorAll(".cart-list__item");cart.lines.forEach(function(t,e){t.amount=t.quantity*t.unitPrice-t.promo,t.virtualPromo=0,n[e].children[1].children[1].value=t.quantity,n[e].children[0].children[2].innerHTML="$"+t.amount.toFixed(2)})}function q(){cart.total.amount=cart.lines.reduce(function(t,n){return t+=n.quantity*n.unitPrice},0)-cart.total.promo}function g(){const t="$"+cart.total.amount.toFixed(2);N.innerHTML=t,S.innerHTML=t;const n=cart.lines.reduce(function(t,n){return t+=n.quantity},0);_.innerHTML=n,b.innerHTML=n,n||(P.classList.remove("cart--show"),M.checked=!1)}const h=t.querySelector("#listing-container"),P=t.querySelector("#cart-container"),_=t.querySelector("#item-counter"),b=t.querySelector("#item-counter-modal"),E=t.querySelector("#cart-list"),N=t.querySelector("#cart-total"),S=t.querySelector("#cart-total-modal"),M=t.querySelector("#cart-modal-toggle"),H=t.querySelector("#promo-button"),T=t.querySelector("#promo-code"),w=t.querySelector("#promo-msg"),I=t.querySelector("#promo-status");h.addEventListener("click",f),E.addEventListener("click",m),E.addEventListener("click",d),E.addEventListener("click",l),H.addEventListener("click",n)}(document);