!function(e){function t(t){"interactive"===e.readyState||"complete"===e.readyState?t():e.addEventListener("DOMContentLoaded",t)}t(function(){function t(){return e.cookie.split("; ").reduce(function(e,t){const n=t.indexOf("=");return e[t.slice(0,n)]=t.slice(n+1),e},{})}function n(){return[].reduce.call(i,function(e,t){return e[t.name]=t.value,e},{})}function a(){const t=new XMLHttpRequest;t.onload=function(){if(200===t.status){l.classList.add("t-display-none"),console.log(t.response),o.innerHTML="Welcome "+JSON.parse(t.response).firstname,o.classList.remove("t-display-none");const n=new Date;n.setTime(n.getTime()+604800),e.cookie="firstname=".concat(JSON.parse(t.response).firstname).concat(";expires=").concat(n.toUTCString())}else r.innerHTML="Something is wrong with the server",r.style.display="inline-block"},t.onerror=function(){r.innerHTML="Something is wrong with the server",r.style.display="inline-block"},t.open("GET","http://localhost:8000/create_account"),t.send(n())}const i=e.querySelectorAll(".coves-form__input"),r=e.getElementById("signup__error-box"),l=e.getElementById("signup-form"),o=e.getElementById("greeting"),s=t();s.firstname?o.innerHTML="Welcome ".concat(s.firstname):(o.classList.add("t-display-none"),l.classList.remove("t-display-none")),validator.addValidation("#username",["blur"],function(e){return!validator.isEmpty(e.value)&&!validator.isBetween(e.value.length,6,20)},"Length not between 6 and 20"),validator.addOK("#username",["blur"],function(e){return validator.isBetween(e.value.length,6,20)}),validator.addValidation("input[id$=-name]",["blur"],function(e){return!validator.isEmpty(e.value)&&validator.isLength(e.value,2)},"Minimum length 3"),validator.addOK("input[id$=-name]",["blur"],function(e){return validator.isOfLength(e.value,3)}),validator.addValidation("#email",["blur"],function(e){return!validator.isEmpty(e.value)&&!validator.isEmailAddress(e.value)},"Not a valid email"),validator.addOK("#email",["blur"],function(e){return validator.isEmailAddress(e.value)}),validator.addValidation("#birth",["blur"],function(e){return!validator.isEmpty(e.value)&&!validator.isDate(e.value)},"Not a valid date"),validator.addOK("#birth",["blur"],function(e){return validator.isDate(e.value)}),[].forEach.call(e.querySelectorAll("#pass"),function(t){const n=e.querySelector("#pass-repeat");["keyup","blur"].forEach(function(e){t.addEventListener(e,function(){validator.isLength(t.value,5)?(t.nextElementSibling.innerHTML="Minimum length 6",t.setCustomValidity("Minimum length 6")):(t.setCustomValidity(""),t.value!==n.value?(n.nextElementSibling.innerHTML="Passwords must match",n.setCustomValidity("Passwords must match")):n.setCustomValidity(""))})})}),validator.addOK("#pass",["keyup","blur"],function(e){return validator.isOfLength(e.value,6)}),validator.addOK("#pass-repeat",["keyup","blur"],function(t){return t.value===e.querySelector("#pass").value}),validator.addValidation("#pass-repeat",["keyup","blur"],function(t){return t.value!==e.querySelector("#pass").value},"Passwords must match"),l.addEventListener("submit",function(t){t.preventDefault();const n=e.querySelectorAll(".coves-form__input--required"),i=[].some.call(n,function(e){return validator.isEmpty(e.value)});!l.checkValidity()||i?i?(r.innerHTML="All inputs are required",r.style.display="inline-block"):r.style.display="none":a()})})}(document);